<p id="notice"><%= notice %></p>

<h1>My Books</h1>

<%if admin? %>
    <%= link_to 'New Book', new_book_path %>
    <%= link_to 'All Borrow History', histories_path %>
<%else%>
    <%= link_to 'My Borrow History', histories_path %>
<% end %>

<%= form_tag(books_path, :method => "get", id: "search-form")do %>
  <%= text_field_tag :search, params[:search], placeholder: "Search Books" %>
  <%= submit_tag "Search" %>
<% end %>

<% if @books.present? %>
    <table>
      <thead>
      <tr>
        <th>ISBN</th>
        <th>Title</th>
        <th>Author</th>
        <th>Description</th>
        <th>Status</th>
        <th colspan="3"></th>
      </tr>
      </thead>

      <tbody>
        <%= @books.each do |book| %>
          <tr>
            <td><p class="book-title"><%= link_to book.title, book %> </p></td>
            <td><p class="book-isbn"><%= book.isbn %></p></td>
            <td><p class="book-author"><%= book.author %></p></td>
            <td><p class="book-description"><%= book.description %></p></td>
            <% if book.status == '1' %>
                <td><p class="Check Out"><%= link_to "Check Out", book %></td>
            <% else %>
                <td><p class="Not Available"><%= link_to "Not Available", book %></td>
            <% end %>
            <% if admin? %>
                <td><%= link_to 'Show', book %></td>
                <td><%= link_to 'Edit', edit_book_path(book) %></td>
                <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

<% else %>
    <p> There are no books containing(s) <%= params[:search] %>.</p>
<% end %>


<%= link_to 'log out', logout_path %>
<%= link_to 'Main', user_path(current_user) %>
