<p id="notice"><%= notice %></p>

<h1>Listing Books</h1>

<table>
  <thead>
  <tr>
    <th>ISBN</th>
    <th>Title</th>
    <th>Author</th>
    <th>Description</th>
    <th>Status</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @books.each do |book| %>
      <tr>
        <td><%= book.isbn %></td>
        <td><%= book.title %></td>
        <td><%= book.author %></td>
        <td><%= book.description %></td>
        <td><%= book.status %></td>
        <td><%= link_to 'Show', book %></td>
        <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<br>
<%if admin?%>
<%= link_to 'New Book', new_book_path %>
<%= link_to 'All Borrow History', histories_path %>
    <%else%>
    <%= link_to 'My Borrow History', histories_path %>
<% end %>
<%= form_tag(books_path, :method => "get", id: "search-form")do %>
  <%= text_field_tag :search, params[:search], placeholder: "Search Books" %>
  <%= submit_tag "Search" %>
<% end %>

<% if @books.present? %>
    <%= @books.each do |book| %>
        <h1 class="book-title"><%= link_to book.title, book %> </h1>
        <p class="book-isbn"><%= book.isbn %></p>
        <p class="book-author"><%= book.author %></p>
        <p class="book-description"><%= book.description %></p>
        <p class="book-status"><%= book.status %></p>
        <% if book.status == '1' %>
            <p class="Check Out"><%= link_to "Check Out", book %>
        <% else %>
            <p class="Not Available"><%= link_to "Not Available", book %>
        <% end %>
    <% end %>
<% else %>
    <p> There are no books containing(s) <%= params[:search] %>.</p>
<% end %>
